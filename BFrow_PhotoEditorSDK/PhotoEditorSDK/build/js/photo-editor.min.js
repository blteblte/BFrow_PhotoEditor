var __extends,PhotoEditor;(function(n){var t;(function(n){n.sdkVersionFolder="pre_3.4.0"})(t=n.Globals||(n.Globals={}))})(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(n){n.Texts={Nav:{EditNextPicture:"EDIT NEXT PICTURE",Back:"BACK",UploadAll:"DONE"},EditorNav:{PictureSettings:"PICTURE SETTINGS",FilterGalery:"FILTER GALERY",ColorSettings:"COLOR SETTINGS"},Buttons:{RotateLeft:"Rotate Left",RotateRight:"Rotate Right",FlipH:"Flip Horizontal",FlipV:"Flip Vertical",Crop:"Crop",CropCustom:"Custom",CropSquare:"Square",Crop4to3:"4:3",Crop16to9:"16:9",Brightness:"Brightness",Saturation:"Saturation",Contrast:"Contrast",Exposure:"Exposure",Shadows:"Shadows",Highlights:"Highlights",Resset:"Reset",Resize:"Resize",FitToScreen:"Fit To Page",LockRatio:"Lock Ratio",Cancel:"Cancel",Submit:"Submit",Back:"Back",Done:"Done"},Inputs:{ResizeWidthPlch:"width...",ResizeHeightPlch:"height..."}}})(t=n.Globals||(n.Globals={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(){})(t=n.Handlers||(n.Handlers={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(n){var e=function(){function n(){}return n.Vertical="v",n.Horizontal="h",n}(),r,u,t,i,f;n.FlipDirection=e;r=function(){function n(){}return n.Left="l",n.Right="r",n}();n.RotateDirection=r;u=function(){function n(){}return n.W="w",n.H="h",n}();n.ImageDimension=u;t=function(){function n(){}return n.Brightness="brightness",n.Saturation="saturation",n.Contrast="contrast",n.Exposure="exposure",n.Shadows="shadows",n.Highlights="highlights",n}();n.AdjustmentTypes=t;i=function(){function n(n,t,i,r,u){this.type=n;this.min=t;this.max=i;this.initial=r;this.multiplier=u}return n}();n.Adjustments=i;f=function(){function n(){}return n.GetAdjustmentSettings=function(n){for(var i={},t=0,r=this._adjustmentSettings.length;t<r;t++)i[this._adjustmentSettings[t].type]=this._adjustmentSettings[t];return i[n]},n._adjustmentSettings=[new i(t.Brightness,-50,50,0,100),new i(t.Saturation,0,200,100,100),new i(t.Contrast,0,200,100,100),new i(t.Exposure,-100,100,0,100),new i(t.Shadows,0,100,0,100),new i(t.Highlights,0,100,100,100)],n}();n.AdjustmentSettings=f;n._editorInstances=0})(t=n.Globals||(n.Globals={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t=function(){function n(n,t){this.image=n;this.url=t}return n}();n.ExportedImage=t}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(t){var i;(function(t){var i=function(){function t(t){this.sdk=t;this.OrientationOperation=null;this.FilterOperation=null;this.AdjustmentOperation=null;this._originalZoom=null;this._wToHRatio=null;this._hToWRatio=null;this._initialImageW=null;this._initialImageH=null;this._imageW=null;this._imageH=null;this.rotation=0;this.flippedH=!1;this.flippedV=!1;this.brightnessValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Brightness).initial;this.saturationValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Saturation).initial;this.contrastValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Contrast).initial;this.exposureValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Exposure).initial;this.shadowsValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Shadows).initial;this.highlightsValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Highlights).initial;this.adjustStateSaved=!1}return Object.defineProperty(t.prototype,"originalZoom",{get:function(){return this._originalZoom===null&&this.sdk!==null&&(this._originalZoom=this.sdk.getZoom()),this._originalZoom},set:function(n){this._originalZoom=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wToHRatio",{get:function(){if(this._wToHRatio===null&&this.sdk!==null){var n=this.sdk.getInputDimensions();this._wToHRatio=n.x/n.y}return this._wToHRatio},set:function(n){this._wToHRatio=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hToWRatio",{get:function(){if(this._hToWRatio===null&&this.sdk!==null){var n=this.sdk.getInputDimensions();this._hToWRatio=n.y/n.x}return this._hToWRatio},set:function(n){this._hToWRatio=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initialImageW",{get:function(){return this._initialImageW===null&&this.sdk!==null&&(this._initialImageW=this.sdk.getInputDimensions().x),this._initialImageW},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initialImageH",{get:function(){return this._initialImageH===null&&this.sdk!==null&&(this._initialImageH=this.sdk.getInputDimensions().y),this._initialImageH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageW",{get:function(){return this._imageW===null&&(this._imageW=this.initialImageW),this._imageW},set:function(n){this._imageW=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageH",{get:function(){return this._imageH===null&&(this._imageH=this.initialImageH),this._imageH},set:function(n){this._imageH=n},enumerable:!0,configurable:!0}),t.prototype.ResetState=function(){this.rotation=0;this.flippedH=!1;this.flippedV=!1;this.imageW=this.initialImageW;this.imageH=this.initialImageH;this.brightnessValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Brightness).initial;this.saturationValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Saturation).initial;this.contrastValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Contrast).initial;this.exposureValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Exposure).initial;this.shadowsValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Shadows).initial;this.highlightsValue=n.Globals.AdjustmentSettings.GetAdjustmentSettings(n.Globals.AdjustmentTypes.Highlights).initial},t.prototype.ResetOrientationState=function(){this.OrientationOperation=null;this.rotation=0;this.flippedV=!1;this.flippedH=!1},t.prototype.getImageRatio=function(t,i){return i===void 0&&(i=!1),t==n.Globals.ImageDimension.W?i?this.hToWRatio:this.wToHRatio:i?this.wToHRatio:this.hToWRatio},t.prototype.getImageInitialSize=function(t){return t==n.Globals.ImageDimension.W?this.initialImageW:this.initialImageH},t.prototype.getImageCurrentSize=function(t){return t==n.Globals.ImageDimension.W?this.imageW:this.imageH},t.prototype._getRotation=function(n){return this.rotation=this.rotation+=n,this.rotation===-360&&(this.rotation=0),this.rotation===360&&(this.rotation=0),this.rotation},t}();t.ActionState=i})(i=t.SDK||(t.SDK={}))})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(t){var i;(function(t){var i=function(){function i(i,r,u,f,e){var s=this,o;this.reactUI=i;this.sdk=r;this.editor=u;this.containerId=f;this.image=e;this.sdk=r;this.editor=u;this.containerId=f;this.editorIndex=r!==null?n.Globals._editorInstances++:-1;this.state=new t.ActionState(r);this._lastExit=null;r!==null&&(o=!1,window.onresize=function(){o||setTimeout(function(){s.state.originalZoom=r.getZoom();o=!1},800);o=!0})}return i.prototype._lastExit=function(){},i.prototype.FitToScreen=function(n){var t=this.sdk.getOutputDimensions(),i=this.sdk.getCanvas(),r=1,u;return t.y>i.height&&(r=i.height/t.y),t.x>i.width&&(r=i.width/t.x),u=r==1?this.state.originalZoom:this.state.originalZoom*r,this.sdk.setZoom(u),this.sdk.render(),typeof n=="function"&&n(),u},i.prototype.TriggerFitToScreen=function(){window.dispatchEvent(new Event("resize"))},i.prototype.ResetOrientation=function(n,t){t===void 0&&(t=!0);var i=function(){typeof n=="function"&&n()};this.state.OrientationOperation!==null?(this.sdk.removeOperation(this.state.OrientationOperation),this.state.ResetOrientationState(),t?this.FitToScreen(n):i()):i()},i.prototype.Reset=function(){var n=this;this.init(null,function(){n.state.ResetState();n.sdk.reset();n.sdk.setImage(n.image);window.dispatchEvent(new Event("resize"))})},i.prototype.Export=function(t,i,r){var u=this;this.init(null,function(){u.sdk.render().then(function(){u.sdk.export(PhotoEditorSDK.RenderType.DATAURL,t,1).then(function(t){i(new n.ExportedImage(t,u.image.src));!r||setTimeout(function(){u.DisposeEditor(!0)},1e3)})})})},i.prototype.DisposeEditor=function(t){t===void 0&&(t=!1);$(".pesdk-react-modals__button").click();t&&this.reactUI.dispose();var i="#"+this.containerId+"-editor";$(i).remove();$(".photo-editor-ui_container").remove();console.log(i+" disposed");n.Globals._editorDisposator=null},i.prototype.init=function(n,t){n===void 0&&(n=null);t===void 0&&(t=null);typeof this._lastExit=="function"&&this._lastExit();this._lastExit=n;setTimeout(function(){typeof t=="function"&&t()},100)},i.prototype.ResizeImage=function(n,t,i,r){var u=this;i===void 0&&(i=null);r===void 0&&(r=!0);this.ResetOrientation(function(){u.init(null,function(){u.RemoveCrop();u.state.imageW=n;u.state.imageH=t;var f=new PhotoEditorSDK.Math.Vector2(n,t);u.sdk.setImage(u.sdk.getImage(),u.sdk.getExif(),f);r?u.FitToScreen(i):typeof i=="function"&&i()})},!1)},i.prototype.ResetPictureSettings=function(){var n=this;this.init(null,function(){n.ResetOrientation(function(){n.ResizeImage(n.state.initialImageW,n.state.initialImageH,function(){n.RemoveCrop();n.TriggerFitToScreen()},!1)},!1)})},i.prototype.RemoveCrop=function(){var n=this,t=this.editor.getOperationsStack();t.forEach(function(t){t instanceof PhotoEditorSDK.Operations.CropOperation&&n.editor.removeOperation(t)})},i.prototype.getFilterImageByName=function(n){return"content/img/filters/"+n+".png"},i}();t.BaseAction=i})(i=t.SDK||(t.SDK={}))})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n,i,r,u,f){t.call(this,n,i,r,u,f);this.reactUI=n}return __extends(i,t),i.prototype.Rotate=function(t){var i=this;this.init(null,function(){i.state.OrientationOperation==null&&(i.state.OrientationOperation=new PhotoEditorSDK.Operations.OrientationOperation(i.sdk,{}),i.editor.addOperation(i.state.OrientationOperation));var r=t===n.Globals.RotateDirection.Left?-90:90,u=i.state._getRotation(r);i.state.OrientationOperation.setRotation(u);i.FitToScreen(null)})},i.prototype.Flip=function(t){var i=this,r,u;this.state.OrientationOperation==null&&(this.state.OrientationOperation=new PhotoEditorSDK.Operations.OrientationOperation(this.sdk,{}),this.editor.addOperation(this.state.OrientationOperation));r=function(){i.state.flippedH=!i.state.flippedH;i.state.OrientationOperation.setFlipHorizontally(i.state.flippedH)};u=function(){i.state.flippedV=!i.state.flippedV;i.state.OrientationOperation.setFlipVertically(i.state.flippedV)};t===n.Globals.FlipDirection.Horizontal&&(this.state.rotation===0||this.state.rotation==180)?r():t===n.Globals.FlipDirection.Horizontal&&u();t===n.Globals.FlipDirection.Vertical&&(this.state.rotation===90||this.state.rotation==270)?r():t===n.Globals.FlipDirection.Vertical&&u();this.sdk.render()},i.prototype.Adjust=function(t,i){this.state.AdjustmentOperation==null&&(this.state.AdjustmentOperation=new PhotoEditorSDK.Operations.AdjustmentsOperation(this.sdk,{}),this.editor.addOperation(this.state.AdjustmentOperation));var r=n.Globals.AdjustmentSettings.GetAdjustmentSettings(t);switch(t){case n.Globals.AdjustmentTypes.Brightness:this.state.AdjustmentOperation.setBrightness(i);this.state.brightnessValue=i*r.multiplier;break;case n.Globals.AdjustmentTypes.Saturation:this.state.AdjustmentOperation.setSaturation(i);this.state.saturationValue=i*r.multiplier;break;case n.Globals.AdjustmentTypes.Contrast:this.state.AdjustmentOperation.setContrast(i);this.state.contrastValue=i*r.multiplier;break;case n.Globals.AdjustmentTypes.Exposure:this.state.AdjustmentOperation.setExposure(i);this.state.exposureValue=i*r.multiplier;break;case n.Globals.AdjustmentTypes.Shadows:this.state.AdjustmentOperation.setShadows(i);this.state.shadowsValue=i*r.multiplier;break;case n.Globals.AdjustmentTypes.Highlights:this.state.AdjustmentOperation.setHighlights(i);this.state.highlightsValue=i*r.multiplier}this.sdk.render()},i.prototype.GenerateFilterIcons=function(){var n=this,t=[];return $.each(PhotoEditorSDK.Filters,function(i,r){if(r.identifier!=="k1"&&r.identifier!=="k2"&&r.identifier!=="k6"&&r.identifier!=="kdynamic"&&r.identifier!=="morning"&&r.identifier!=="lut"){var u=$('<div class="photo-editor-filter-item '+r.identifier+'"><\/div>').click(function(){n.state.FilterOperation==null&&(n.state.FilterOperation=new PhotoEditorSDK.Operations.FilterOperation(n.sdk,{}),n.editor.addOperation(n.state.FilterOperation));n.state.FilterOperation.setFilter(new r);n.sdk.render()}),f=$('<img src="'+n.getFilterImageByName(r.name)+'" alt="" />'),e=$("<div>"+r.displayName+"<\/div>");u.append(f,e);t.push(u)}}),t},i}(t.BaseAction);t.BasicActions=i})(i=t.SDK||(t.SDK={}))})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(n){var t;(function(t){var i=function(n){function t(t,i,r,u,f){n.call(this,t,i,r,u,f);this.reactUI=t;this._isInControl=!1;this._controlContainer="#"+u+" .pesdk-react-controls.pesdk-react-controls__container.pesdk-react-controls__container__row .pesdk-react-controls__table > .pesdk-react-controls__cell.pesdk-react-controls__cell--list";this._buttonContainer="#"+u+"-editor > div > div:nth-child(3) > div.pesdk-react-editorScreen > div.pesdk-react-controls.pesdk-react-controls__container.pesdk-react-controls__container__row > div > div > div";this._CropInitButtonSelector=this._controlContainer+" .pesdk-react-controls__list__item:nth-child(1) > div";this._CropCancelSelector=this._buttonContainer+" > div:nth-child(1) > div";this._CropSubmitSelector=this._buttonContainer+" > div:nth-child(3) > div"}return __extends(t,n),t.prototype._createSubControls=function(n,t,i){i===void 0&&(i=null);$("#"+this.containerId+" .main-controls-button, #"+this.containerId+" .slick-dots").hide();var r=$('<div class="photo-editor-ui_sub-controls-container"><\/div>');n.forEach(function(n){r.append(n)});t.append(r);typeof i=="function"&&i()},t.prototype._disposeSubControls=function(){$("#"+this.containerId+" .main-controls-button, #"+this.containerId+" .slick-dots").show();$("#"+this.containerId+" .photo-editor-ui_sub-controls-container").remove()},t.prototype._launchControl=function(n,t){var i=this;this._isInControl?$(this._findControl(n)).click():($(t).click(),this._isInControl=!0,setTimeout(function(){$(i._findControl(n)).click()},100))},t.prototype._findControl=function(n){var t=$("#"+this.containerId+" .pesdk-react-controls__list .pesdk-react-controls__list__item[data-reactid*="+n.toLowerCase()+"]"),i=t.attr("data-reactid");return"#"+this.containerId+' .pesdk-react-controls__list__item[data-reactid="'+i+'"] .pesdk-react-controls__button'},t}(n.SDK.BasicActions);t.ReactUIBase=i})(t=n.ReactUI||(n.ReactUI={}))})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u,f){n.call(this,t,i,r,u,f);this.reactUI=t}return __extends(t,n),t.prototype.StartCropping=function(n){var t=this;typeof n=="function"?n():this.init(this.SubmitCrop,null);setTimeout(function(){$(t._CropInitButtonSelector).click();t._isInControl=!0},200)},t.prototype.CancelCrop=function(){$(this._CropCancelSelector).click();this._isInControl=!1},t.prototype.SubmitCrop=function(){var n=this;$(this._CropSubmitSelector).click();this._isInControl=!1;setTimeout(function(){n.state.originalZoom=n.sdk.getZoom()},100)},t.prototype.CropCustom=function(){this._launchControl("custom",this._CropInitButtonSelector)},t.prototype.CropSquare=function(){this._launchControl("square",this._CropInitButtonSelector)},t.prototype.Crop4to3=function(){this._launchControl("4-3",this._CropInitButtonSelector)},t.prototype.Crop16to6=function(){this._launchControl("16-9",this._CropInitButtonSelector)},t.prototype.SubmitAdjust=function(){$(this._AdjustSubmitSelector).click();this._isInControl=!1},t.prototype.StartBrightness=function(){this.init(this.SubmitAdjust);this._launchControl("Brightness",this._AdjustInitButtonSelector)},t.prototype.StartSaturation=function(){this.init(this.SubmitAdjust);this._launchControl("Saturation",this._AdjustInitButtonSelector)},t.prototype.StartContrast=function(){this.init(this.SubmitAdjust);this._launchControl("Contrast",this._AdjustInitButtonSelector)},t.prototype.StartExposure=function(){this.init(this.SubmitAdjust);this._launchControl("Exposure",this._AdjustInitButtonSelector)},t.prototype.StartShadows=function(){this.init(this.SubmitAdjust);this._launchControl("Shadows",this._AdjustInitButtonSelector)},t.prototype.StartHighlights=function(){this.init(this.SubmitAdjust);this._launchControl("Highlights",this._AdjustInitButtonSelector)},t.prototype.StartFilter=function(n){this.init(this.SubmitFilters,null);this._launchControl(n,this._FiltersInitButtonSelector)},t.prototype.SubmitFilters=function(){$(this._FiltersSubmitSelector).click();this._isInControl=!1},t}(n.ReactUIBase);n.ReactUIOverlay=t})(t=n.ReactUI||(n.ReactUI={}))})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(n){var t=function(n){function t(t,i,r,u){var e=t,f=i!==null?i._component._reactInternalInstance._instance.refs.editorScreen._editor:null,o=f!==null?f.getSDK():null;n.call(this,e,o,f,r,u)}return __extends(t,n),t}(n.ReactUI.ReactUIOverlay);n.SDKActions=t})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(n){var t=function(){function n(n,t,i,r,u){n===void 0&&(n="");r===void 0&&(r=null);u===void 0&&(u="");this.text=n;this.cssClass=t;this.onclick=i;this.tagName=r;this.placeholder=u}return n}();n.HTMLButtonControl=t})(t=n.Html||(n.Html={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(n){var t=function(){function n(){}return n.GetButtonContol=function(n){var t=n.tagName===null?this.DEFAULT_DOM_ELEMENT:n.tagName;return t==="input"?$("<"+t+' type="text" class="'+this.CSS_PREFIX+n.cssClass+'" value="'+n.text+'" placeholder="'+n.placeholder+'" />').click(function(){n.onclick($(this))}):$("<"+t+' class="'+this.CSS_PREFIX+n.cssClass+' main-controls-button">\n    <img src="content/img/buttons/'+n.cssClass+'.png" alt="" />\n    <span>'+n.text+"<\/span>\n<\/"+t+">").click(function(){n.onclick($(this))})},n.DEFAULT_DOM_ELEMENT="div",n.CSS_PREFIX="photo-editor-ui_",n}();n.HTMLControls=t})(t=n.Html||(n.Html={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(t){var i=function(){function t(n){this.actions=n;this.lockedRatio=!0;this.prevResizeValues={w:0,h:0}}return t.prototype.HandleRatioInputKeyUp=function(t,i,r,u,f,e){var s=t.val(),o=s.replace(/[^0-9.]/g,""),h=r===n.Globals.ImageDimension.W?this.prevResizeValues.w:this.prevResizeValues.h;s!=h&&(t.val(o),r===n.Globals.ImageDimension.W?this.prevResizeValues.w=parseInt(o):this.prevResizeValues.h=parseInt(o));this.lockedRatio&&i.val(Math.round(o*this.actions.state.getImageRatio(r,!0)));u.which===13&&f();u.which===27&&e()},t.prototype.HandleRatioInputBlur=function(n,t,i){var f=5,r=n.val(),u=this.actions.state.getImageInitialSize(i);r=r>u?u:r>=Math.round(u/f)?r:Math.round(u/f);n.val(r);this.lockedRatio&&t.val(Math.round(r*this.actions.state.getImageRatio(i,!0)))},t.prototype.BindResizeEventHandlers=function(t,i,r,u){var f=this;this.prevResizeValues={w:this.actions.state.imageW,h:this.actions.state.imageH};t.keyup(function(t){f.HandleRatioInputKeyUp($(this),i,n.Globals.ImageDimension.W,t,r,u)}).blur(function(){f.HandleRatioInputBlur($(this),i,n.Globals.ImageDimension.W)});i.keyup(function(i){f.HandleRatioInputKeyUp($(this),t,n.Globals.ImageDimension.H,i,r,u)}).blur(function(){f.HandleRatioInputBlur($(this),t,n.Globals.ImageDimension.H)})},t}();t.EventBinder=i})(t=n.Html||(n.Html={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(t){var i=function(){function t(t,i,r){this.containerId=t;this.dataId=i;this.imageUrl=r;this.actions=null;this.eventBinder=null;typeof n.Globals._editorDisposator=="function"&&n.Globals._editorDisposator()}return t.prototype.LoadEditor=function(){var t=this;return new Promise(function(i){var o=document.getElementById(t.containerId),u=t.containerId+"-editor";$("#"+t.containerId).append('<div id="'+u+'" class="photo-editor-instance-container" style="width: 100%;"><\/div>');var f=document.getElementById(u),r=new Image,e="webgl";r.onload=function(){var u,o;console.log('loading image: "'+t.imageUrl+'" into: "#'+t.containerId+'"');u=new PhotoEditorSDK.UI.ReactUI({pixelRatio:1,container:f,assets:{baseUrl:"content/js/PhotoEditorSDK/"+n.Globals.sdkVersionFolder+"/assets"},showNewButton:!1,showCloseButton:!1,preferredRenderer:e,responsive:!0,enableDrag:!1,enableZoom:!0,webcam:!0,forcePOT:!1,tools:["crop","rotation","flip","filter","brightness","saturation","contrast","exposure","shadows","highlights"],controlsOrder:[["crop","orientation"],["filter"],["adjustments","focus"]],maxMegaPixels:{desktop:10,mobile:5},"export":{type:PhotoEditorSDK.RenderType.DATAURL,download:!1}});t.actions=new n.Actions.SDKActions(u,u.setImage(r),t.containerId,r);t.eventBinder=new n.Html.EventBinder(t.actions);t._initializeUI($("#"+t.containerId));n.Globals._editorDisposator=function(){t.actions.DisposeEditor(!0)};o=function(){try{if(t.actions.sdk.getInputDimensions(),i(t.actions),typeof n.Handlers.onEditorLoaded=="function")n.Handlers.onEditorLoaded(t.actions)}catch(r){setTimeout(function(){o()},100)}};o()};r.src=t.imageUrl})},t.prototype._initializeUI=function(t){var r=this,i=t.attr("id"),s=$('<div class="photo-editor-ui_container '+i+'"><\/div>'),h=$('<div class="photo-editor-ui_tab-container"><\/div>'),u=$('<div data-id="1" class="active"><\/div>'),f=$('<div data-id="2"><\/div>'),e=$('<div data-id="3"><\/div>'),o=function(n){r.actions.init();var t=$(n).attr("data-id");$(".photo-editor-ui_container."+i+" .photo-editor-ui_tab-container > div").hide().removeClass("active");$(".photo-editor-ui_container."+i+' .photo-editor-ui_tab-container > div[data-id="'+t+'"]').show().addClass("active");$(".photo-editor-ui_container."+i+" .photo-editor-ui_tab-control-container > span").removeClass("active");$(n).addClass("active")},c=$('<div class="photo-editor-ui_tab-control-container"><\/div>'),a=$('<span data-id="1" class="active">'+n.Globals.Texts.EditorNav.PictureSettings+"<\/span>").click(function(){o(this)}),v=$('<span data-id="2">'+n.Globals.Texts.EditorNav.FilterGalery+"<\/span>").click(function(){o(this)}),y=$('<span data-id="3">'+n.Globals.Texts.EditorNav.ColorSettings+"<\/span>").click(function(){o(this)});u.append(this._getTab1Content(u));f.append(this._getTab2Content(f));e.append(this._getTab3Content(e));var l=$('<div class="photo-editor-ui_buttons"><\/div>'),p=$('<span class="photo-editor-ui_btn-dispose">'+n.Globals.Texts.Buttons.Back+"<\/span>").click(function(){r.actions.DisposeEditor(!0)}),w=$('<span class="photo-editor-ui_btn-save">'+n.Globals.Texts.Buttons.Done+"<\/span>").click(function(){r.actions.Export(PhotoEditorSDK.ImageFormat.PNG,function(t){if(typeof n.Handlers.onSaveHandler=="function")n.Handlers.onSaveHandler(t)},!0)});h.append(u,f,e);c.append(a,v,y);l.append(p,w);s.append(c,h,l);t.append(s);this._applySlickJS(1);this._applySlickJS(2);this._applySlickJS(3)},t.prototype._getTab1Content=function(t){var i=this,r=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.RotateLeft,"rotate-left",function(){i.actions.Rotate(n.Globals.RotateDirection.Left)})),u=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.RotateRight,"rotate-right",function(){i.actions.Rotate(n.Globals.RotateDirection.Right)})),f=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.FlipH,"flip-h",function(){i.actions.Flip(n.Globals.FlipDirection.Horizontal)})),e=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.FlipV,"flip-v",function(){i.actions.Flip(n.Globals.FlipDirection.Vertical)})),o=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Crop,"crop",function(){i.actions.StartCropping(function(){var r=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Cancel,"cancel",function(){i.actions._disposeSubControls();i.actions.CancelCrop()})),u=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Submit,"submit",function(){i.actions._disposeSubControls();i.actions.SubmitCrop()}));i.actions.init(function(){i.actions._disposeSubControls();i.actions.CancelCrop()},function(){i.actions._createSubControls([r,u],t)})})})),s=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Resize,"resize",function(){var r=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(i.actions.state.imageW,"input-width",function(){},"input",n.Globals.Texts.Inputs.ResizeWidthPlch)),u=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(i.actions.state.imageH,"input-height",function(){},"input",n.Globals.Texts.Inputs.ResizeHeightPlch)),f=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.LockRatio,"lock-ratio "+(i.eventBinder.lockedRatio?"active":""),function(){i.eventBinder.lockedRatio=!i.eventBinder.lockedRatio;i.eventBinder.lockedRatio?(f.addClass("active"),r.keyup()):f.removeClass("active")})),e=function(){i.actions._disposeSubControls()},s=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Cancel,"cancel",e)),o=function(){var n=0,t=0;r.val()!=""&&u.val()!=""&&(n=+r.val(),t=+u.val(),isNaN(n)||isNaN(t)||(i.actions.ResizeImage(n,t),i.actions._disposeSubControls()))},h=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Submit,"submit",o));i.eventBinder.BindResizeEventHandlers(r,u,o,e);i.actions.init(i.actions._disposeSubControls,function(){i.actions._createSubControls([s,r,f,u,h],t)})})),h=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.FitToScreen,"fitToScreen",function(){i.actions.TriggerFitToScreen()})),c=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Resset,"resetTab1",function(){i.actions.ResetPictureSettings()}));return[o,r,u,f,e,s,h,c]},t.prototype._getTab2Content=function(){return this.actions.GenerateFilterIcons()},t.prototype._getTab3Content=function(t){var i=this,f=this,u=function(t){var r=n.Globals.AdjustmentSettings.GetAdjustmentSettings(t);i.actions.Adjust(t,parseFloat(r.initial)/r.multiplier);i.actions._disposeSubControls()},e=function(t){return n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Cancel,"cancel",function(){u(t)}))},o=function(){return n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Submit,"submit",function(){i.actions.state.adjustStateSaved=!0;i.actions._disposeSubControls()}))},s=function(){return $('<div id="photo-editor-ui_slider"><\/div>')},h=function(n,t,i){var r=function(n){var i=(t.max-t.min)/2,r=i===0?0:n*t.multiplier/i;return Math.round(r*100)},u=$('<span class="ui-slider-numbox">'+r(i/t.multiplier)+"<\/span>");$("#photo-editor-ui_slider").slider({range:"min",min:t.min,max:t.max,value:i,slide:function(i,e){var o=parseFloat(e.value)/t.multiplier;u.text(r(o));f.actions.Adjust(n,o)}});$(".ui-slider-handle").append(u)},r=function(r,f){i.actions.init(function(){i.actions.state.adjustStateSaved||u(r);i.actions._disposeSubControls()},function(){i.actions._createSubControls([s(),e(r),o()],t,function(){i.actions.state.adjustStateSaved=!1;h(r,n.Globals.AdjustmentSettings.GetAdjustmentSettings(r),f)})})},c=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Brightness,"brightness",function(){r(n.Globals.AdjustmentTypes.Brightness,i.actions.state.brightnessValue)})),l=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Saturation,"saturation",function(){r(n.Globals.AdjustmentTypes.Saturation,i.actions.state.saturationValue)})),a=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Contrast,"contrast",function(){r(n.Globals.AdjustmentTypes.Contrast,i.actions.state.contrastValue)})),v=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Exposure,"exposure",function(){r(n.Globals.AdjustmentTypes.Exposure,i.actions.state.exposureValue)})),y=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Shadows,"shadows",function(){r(n.Globals.AdjustmentTypes.Shadows,i.actions.state.shadowsValue)})),p=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Highlights,"highlights",function(){r(n.Globals.AdjustmentTypes.Highlights,i.actions.state.highlightsValue)}));return[a,c,y,l,v,p]},t.prototype._applySlickJS=function(n){$("#"+this.containerId+" .photo-editor-ui_tab-container > div:nth-child("+n+")").slick({slidesToShow:9,slidesToScroll:9,dots:!0,touchMove:!0,infinite:!1,arrows:!1,responsive:[{breakpoint:1e3,settings:{slidesToShow:7,slidesToScroll:7}},{breakpoint:700,settings:{slidesToShow:5,slidesToScroll:5}},{breakpoint:450,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:400,settings:{slidesToShow:3,slidesToScroll:3}}]})},t}();t.ImageEditor=i})(t=n.Editor||(n.Editor={}))}(PhotoEditor||(PhotoEditor={}))