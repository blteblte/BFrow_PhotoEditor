var __extends,PhotoEditor;(function(n){var t;(function(n){n.sdkVersionFolder="3.3.0"})(t=n.Globals||(n.Globals={}))})(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(n){n.Texts={Nav:{EditNextPicture:"EDIT NEXT PICTURE",Back:"BACK",UploadAll:"DONE"},EditorNav:{PictureSettings:"PICTURE SETTINGS",FilterGalery:"FILTER GALERY",ColorSettings:"COLOR SETTINGS"},Buttons:{RotateLeft:"Rotate Left",RotateRight:"Rotate Right",FlipH:"Flip Horizontal",FlipV:"Flip Vertical",Crop:"Crop",CropCustom:"Custom",CropSquare:"Square",Crop4to3:"4:3",Crop16to9:"16:9",Brightness:"Brightness",Saturation:"Saturation",Contrast:"Contrast",Exposure:"Exposure",Shadows:"Shadows",Highlights:"Highlights",Resset:"Reset",Resize:"Resize",FitToScreen:"Fit To Page",LockRatio:"Lock Ratio",Cancel:"Cancel",Submit:"Submit"},Inputs:{ResizeWidthPlch:"width...",ResizeHeightPlch:"height..."}}})(t=n.Globals||(n.Globals={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(n){var r=function(){function n(){}return n.Vertical="v",n.Horizontal="h",n}(),t,i;n.FlipDirection=r;t=function(){function n(){}return n.Left="l",n.Right="r",n}();n.RotateDirection=t;i=function(){function n(){}return n.W="w",n.H="h",n}();n.ImageDimension=i;n._editorInstances=0})(t=n.Globals||(n.Globals={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t=function(){function n(n,t){this.image=n;this.url=t}return n}();n.ExportedImage=t}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(t){var i;(function(t){var i=function(){function t(n){var t,i;this.sdk=n;this.rotation=0;this.flippedH=!1;this.flippedV=!1;this.originalZoom=n!==null?n.getZoom():1;this.RotationOperationStack=[];this.FlipOperationStack=[];this.FilterOperationStack=[];t=n!==null?n.getOutputDimensions():null;t!==null&&(this.wToHRatio=t.x/t.y,this.hToWRatio=t.y/t.x);i=n!==null?n.getInputDimensions():null;i!==null&&(this.imageW=i.x,this.imageH=i.y,this.initialImageW=this.imageW,this.initialImageH=this.imageH)}return t.prototype.ResetState=function(){this.RotationOperationStack=[];this.FlipOperationStack=[];this.rotation=0;this.flippedH=!1;this.flippedV=!1;this.imageW=this.initialImageW;this.imageH=this.initialImageH},t.prototype.ClearRotationStack=function(){var n=this;this.RotationOperationStack.length>0&&(this.RotationOperationStack.forEach(function(t){n.sdk.removeOperation(t)}),this.RotationOperationStack=[])},t.prototype.ClearFlipStack=function(){var n=this;this.FlipOperationStack.length>0&&(this.FlipOperationStack.forEach(function(t){n.sdk.removeOperation(t)}),this.FlipOperationStack=[])},t.prototype.getImageRatio=function(t,i){return i===void 0&&(i=!1),t==n.Globals.ImageDimension.W?i?this.hToWRatio:this.wToHRatio:i?this.wToHRatio:this.hToWRatio},t.prototype.getImageInitialSize=function(t){return t==n.Globals.ImageDimension.W?this.initialImageW:this.initialImageH},t.prototype.getImageCurrentSize=function(t){return t==n.Globals.ImageDimension.W?this.imageW:this.imageH},t.prototype._getRotation=function(n){return this.rotation=this.rotation+=n,this.rotation===-360&&(this.rotation=0),this.rotation===360&&(this.rotation=0),this.rotation},t}();t.ActionState=i})(i=t.SDK||(t.SDK={}))})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(t){var i;(function(t){var i=function(){function i(i,r,u,f){var o=this,e;this.sdk=i;this.editor=r;this.containerId=u;this.image=f;this.sdk=i;this.editor=r;this.containerId=u;this.editorIndex=i!==null?n.Globals._editorInstances++:-1;this.state=new t.ActionState(i);this._lastExit=null;i!==null&&(e=!1,window.onresize=function(){e||setTimeout(function(){o.state.originalZoom=i.getZoom();e=!1},800);e=!0})}return i.prototype._lastExit=function(){},i.prototype.FitToScreen=function(n){var t=this.sdk.getOutputDimensions(),i=this.sdk.getCanvas(),r=1,u;return t.y>i.height&&(r=i.height/t.y),t.x>i.width&&(r=i.width/t.x),u=r==1?this.state.originalZoom:this.state.originalZoom*r,this.sdk.setZoom(u),this.sdk.render(),typeof n=="function"&&n(),u},i.prototype.TriggerFitToScreen=function(){window.dispatchEvent(new Event("resize"))},i.prototype.ResetOrientation=function(n,t){t===void 0&&(t=!0);var i=function(){typeof n=="function"&&n()},r=this.state.RotationOperationStack.length>0||this.state.FlipOperationStack.length>0;r?(this.state.ClearRotationStack(),this.state.rotation=0,this.state.ClearFlipStack(),this.state.flippedH=!1,this.state.flippedV=!1,t?this.FitToScreen(n):i()):i()},i.prototype.Reset=function(){var n=this;this.init(null,function(){n.state.ResetState();n.sdk.reset();n.sdk.setImage(n.image);window.dispatchEvent(new Event("resize"))})},i.prototype.Export=function(t,i,r){var u=this;this.init(null,function(){u.sdk.render().then(function(){u.sdk.export(PhotoEditorSDK.RenderType.DATAURL,t,1).then(function(t){i(new n.ExportedImage(t,u.image.src));!r||setTimeout(function(){u.DisposeEditor()},1e3)})})})},i.prototype.DisposeEditor=function(){var n="#"+this.containerId;$(n).remove();console.log(n+" disposed")},i.prototype.init=function(n,t){n===void 0&&(n=null);t===void 0&&(t=null);typeof this._lastExit=="function"&&this._lastExit();this._lastExit=n;setTimeout(function(){typeof t=="function"&&t()},100)},i}();t.BaseAction=i})(i=t.SDK||(t.SDK={}))})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n,i,r,u){t.call(this,n,i,r,u)}return __extends(i,t),i.prototype.Rotate=function(t){var i=this;this.init(null,function(){i.state.ClearRotationStack();var r=new PhotoEditorSDK.Operations.OrientationOperation(i.sdk,{}),u=t===n.Globals.RotateDirection.Left?-90:90;r.setRotation(i.state._getRotation(u));i.state.RotationOperationStack.push(r);i.sdk.addOperation(r);i.FitToScreen(null)})},i.prototype.Flip=function(t){this.state.ClearFlipStack();var i=new PhotoEditorSDK.Operations.OrientationOperation(this.sdk,{});t===n.Globals.FlipDirection.Horizontal?(this.state.flippedH=!this.state.flippedH,i.setFlipHorizontally(this.state.flippedH)):(this.state.flippedV=!this.state.flippedV,i.setFlipVertically(this.state.flippedV));this.state.FlipOperationStack.push(i);this.sdk.addOperation(i);this.sdk.render()},i.prototype.ResizeImage=function(n,t){var i=this;this.ResetOrientation(function(){i.init(null,function(){i.state.imageW=n;i.state.imageH=t;var r=new PhotoEditorSDK.Math.Vector2(n,t);i.sdk.setImage(i.image,i.sdk.getExif(),r);i.FitToScreen(null)})},!1)},i}(t.BaseAction);t.BasicActions=i})(i=t.SDK||(t.SDK={}))})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){var i;(function(i){var r=function(t){function i(n,i,r,u){t.call(this,n,i,r,u);this._isInControl=!1;this._AdjustInitButtonSelector="#"+r+' .pesdk-react-controls__button__icon[data-reactid=".'+this.editorIndex+'.1.1.2.0.0.0.0.0.0.$adjustments.0.0"]';this._AdjustSubmitSelector="#"+r+' .pesdk-react-controls__largeButton__icon[data-reactid=".'+this.editorIndex+'.1.1.2.0.0.1.0.0.0"]';this._FiltersInitButtonSelector="#"+r+' .pesdk-react-controls__button__icon[data-reactid=".'+this.editorIndex+'.1.1.2.0.0.0.0.0.0.$filter.0.0"]';this._FiltersSubmitSelector="#"+r+' .pesdk-react-controls__largeButton__icon[data-reactid=".'+this.editorIndex+'.1.1.2.0.0.1.0.0.0"]';this._CropInitButtonSelector="#"+this.containerId+' .pesdk-react-controls__button__icon[data-reactid=".'+this.editorIndex+'.1.1.2.0.0.0.0.0.0.$crop.0.0"]';this._CropCancelSelector="#"+this.containerId+' .pesdk-react-controls__largeButton__icon[data-reactid=".'+this.editorIndex+'.1.1.2.0.0.0.0.0.0"]';this._CropSubmitSelector="#"+this.containerId+' .pesdk-react-controls__largeButton__icon[data-reactid=".'+this.editorIndex+'.1.1.2.0.0.0.2.0.0"]'}return __extends(i,t),i.prototype._createSubControls=function(n,t){var i=$('<div class="photo-editor-ui_sub-controls-container"><\/div>');n.forEach(function(n){i.append(n)});t.append(i)},i.prototype._disposeSubControls=function(){$("#"+this.containerId+" .photo-editor-ui_sub-controls-container").remove()},i.prototype._launchControl=function(n,t){var i=this;this._isInControl?$(this._findControl(n)).click():($(t).click(),this._isInControl=!0,setTimeout(function(){$(i._findControl(n)).click()},100))},i.prototype._findControl=function(n){var t=$("#"+this.containerId+" .pesdk-react-controls__list .pesdk-react-controls__list__item[data-reactid*="+n.toLowerCase()+"]"),i=t.attr("data-reactid");return"#"+this.containerId+' .pesdk-react-controls__list__item[data-reactid="'+i+'"] .pesdk-react-controls__button'},i.prototype.getFilterImageByName=function(t){var i="content/js/PhotoEditorSDK/"+n.Globals.sdkVersionFolder+"/assets/ui/react/controls/filters/";switch(t){case"IdentityFilter":return i+"identity@2x.png";case"A15Filter":return i+"a15@2x.png";case"BreezeFilter":return i+"breeze@2x.png";case"BWFilter":return i+"bw@2x.png";case"BWHardFilter":return i+"bwhard@2x.png";case"CelsiusFilter":return i+"celsius@2x.png";case"ChestFilter":return i+"chest@2x.png";case"FixieFilter":return i+"fixie@2x.png";case"FoodFilter":return i+"food@2x.png";case"FridgeFilter":return i+"fridge@2x.png";case"FrontFilter":return i+"front@2x.png";case"GlamFilter":return i+"glam@2x.png";case"GobblinFilter":return i+"gobblin@2x.png";case"LeninFilter":return i+"lenin@2x.png";case"LomoFilter":return i+"lomo@2x.png";case"MellowFilter":return i+"mellow@2x.png";case"MetalFilter":return i+"metal@2x.png";case"OrchidFilter":return i+"orchid@2x.png";case"PolaFilter":return i+"pola@2x.png";case"Pola669Filter":return i+"pola669@2x.png";case"QuoziFilter":return i+"quozi@2x.png";case"SemiredFilter":return i+"semired@2x.png";case"SunnyFilter":return i+"sunny@2x.png";case"TexasFilter":return i+"texas@2x.png";case"X400Filter":return i+"x400@2x.png";default:return i+"identity@2x.png"}},i}(t.SDK.BasicActions);i.ReactUIBase=r})(i=t.ReactUI||(t.ReactUI={}))})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i,r,u){n.call(this,t,i,r,u)}return __extends(t,n),t.prototype.StartCropping=function(n){var t=this;typeof n=="function"?n():this.init(this.SubmitCrop,null);this.ResetOrientation(function(){setTimeout(function(){$(t._CropInitButtonSelector).click();t._isInControl=!0},200)})},t.prototype.CancelCrop=function(){$(this._CropCancelSelector).click();this._isInControl=!1},t.prototype.SubmitCrop=function(){var n=this;$(this._CropSubmitSelector).click();this._isInControl=!1;setTimeout(function(){n.state.originalZoom=n.sdk.getZoom()},100)},t.prototype.CropCustom=function(){this._launchControl("custom",this._CropInitButtonSelector)},t.prototype.CropSquare=function(){this._launchControl("square",this._CropInitButtonSelector)},t.prototype.Crop4to3=function(){this._launchControl("4-3",this._CropInitButtonSelector)},t.prototype.Crop16to6=function(){this._launchControl("16-9",this._CropInitButtonSelector)},t.prototype.SubmitAdjust=function(){$(this._AdjustSubmitSelector).click();this._isInControl=!1},t.prototype.StartBrightness=function(){this.init(this.SubmitAdjust);this._launchControl("Brightness",this._AdjustInitButtonSelector)},t.prototype.StartSaturation=function(){this.init(this.SubmitAdjust);this._launchControl("Saturation",this._AdjustInitButtonSelector)},t.prototype.StartContrast=function(){this.init(this.SubmitAdjust);this._launchControl("Contrast",this._AdjustInitButtonSelector)},t.prototype.StartExposure=function(){this.init(this.SubmitAdjust);this._launchControl("Exposure",this._AdjustInitButtonSelector)},t.prototype.StartShadows=function(){this.init(this.SubmitAdjust);this._launchControl("Shadows",this._AdjustInitButtonSelector)},t.prototype.StartHighlights=function(){this.init(this.SubmitAdjust);this._launchControl("Highlights",this._AdjustInitButtonSelector)},t.prototype.StartFilter=function(n){this.init(this.SubmitFilters,null);this._launchControl(n,this._FiltersInitButtonSelector)},t.prototype.SubmitFilters=function(){$(this._FiltersSubmitSelector).click();this._isInControl=!1},t.prototype.GenerateFilterIcons=function(){var n=this,t=[];return $.each(PhotoEditorSDK.Filters,function(i,r){if(r.identifier!=="k1"&&r.identifier!=="k2"&&r.identifier!=="k6"&&r.identifier!=="kdynamic"&&r.identifier!=="morning"){var u=$('<div class="photo-editor-filter-item"><\/div>').click(function(){n.StartFilter(r.identifier)}),f=$('<img src="'+n.getFilterImageByName(r.name)+'" alt="" />'),e=$("<div>"+r.displayName+"<\/div>");u.append(f,e);t.push(u)}}),t},t}(n.ReactUIBase);n.ReactUIOverlay=t})(t=n.ReactUI||(n.ReactUI={}))})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(n){var t=function(n){function t(t,i,r,u){var e=t,f=i!==null?i._component._reactInternalInstance._instance.refs.screen._editor:null,o=f!==null?f.getSDK():null;n.call(this,o,f,r,u);this.reactEditor=e}return __extends(t,n),t}(n.ReactUI.ReactUIOverlay);n.SDKActions=t})(t=n.Actions||(n.Actions={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(n){var t=function(){function n(n,t,i,r,u){n===void 0&&(n="");r===void 0&&(r=null);u===void 0&&(u="");this.text=n;this.cssClass=t;this.onclick=i;this.tagName=r;this.placeholder=u}return n}();n.HTMLButtonControl=t})(t=n.Html||(n.Html={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(n){var t=function(){function n(){}return n.GetButtonContol=function(n){var t=n.tagName===null?this.DEFAULT_DOM_ELEMENT:n.tagName;return t==="input"?$("<"+t+' type="text" class="'+this.CSS_PREFIX+n.cssClass+'" value="'+n.text+'" placeholder="'+n.placeholder+'" />').click(function(){n.onclick($(this))}):$("<"+t+' class="'+this.CSS_PREFIX+n.cssClass+'">'+n.text+"<\/"+t+">").click(function(){n.onclick($(this))})},n.DEFAULT_DOM_ELEMENT="button",n.CSS_PREFIX="photo-editor-ui_",n}();n.HTMLControls=t})(t=n.Html||(n.Html={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t;(function(t){var i=function(){function t(n,t,i){this.containerId=n;this.dataId=t;this.imageUrl=i;this.lockedRatio=!0;this.prevResizeValues={w:0,h:0};this.actions=null}return t.prototype.LoadEditor=function(){var t=this;return new Promise(function(i){var o=document.getElementById(t.containerId),u=t.containerId+"-editor";$("#"+t.containerId).append('<div id="'+u+'" style="width: 100%; height: 90%;"><\/div>');var e=document.getElementById(u),r=new Image,f="webgl";f=$("#renderer-select").val();r.onload=function(){console.log('loading image: "'+t.imageUrl+'" into: "#'+t.containerId+'"');var u=new PhotoEditorSDK.UI.ReactUI({pixelRatio:1,container:e,assets:{baseUrl:"content/js/PhotoEditorSDK/"+n.Globals.sdkVersionFolder+"/assets"},showNewButton:!1,showCloseButton:!1,preferredRenderer:f,responsive:!0,enableDrag:!1,enableZoom:!0,webcam:!0,forcePOT:!1,tools:["crop","rotation","flip","filter","brightness","saturation","contrast","exposure","shadows","highlights"],controlsOrder:[["crop","orientation"],["filter"],["adjustments","focus"]],maxMegaPixels:{desktop:10,mobile:5},"export":{type:PhotoEditorSDK.RenderType.DATAURL,download:!1}});t.actions=new n.Actions.SDKActions(u,u.setImage(r),t.containerId,r);t._initializeUI($("#"+t.containerId));i(t.actions)};r.src=t.imageUrl})},t.prototype.HandleRatioInputKeyUp=function(n,t,i,r,u,f){var o=n.val(),e=o.replace(/[^0-9.]/g,""),s=i==="w"?this.prevResizeValues.w:this.prevResizeValues.h;o!=s&&(n.val(e),i==="w"?this.prevResizeValues.w=parseInt(e):this.prevResizeValues.h=parseInt(e));this.lockedRatio&&t.val(Math.round(e*this.actions.state.getImageRatio(i,!0)));r.which===13&&u();r.which===27&&f()},t.prototype.HandleRatioInputBlur=function(n,t,i){var f=5,r=n.val(),u=this.actions.state.getImageInitialSize(i);r=r>u?u:r>=u/f?r:u/f;n.val(r);this.lockedRatio&&t.val(Math.round(r*this.actions.state.getImageRatio(i,!0)))},t.prototype.BindResizeEventHandlers=function(t,i,r,u){var f=this;this.prevResizeValues={w:this.actions.state.imageW,h:this.actions.state.imageH};t.keyup(function(t){f.HandleRatioInputKeyUp($(this),i,n.Globals.ImageDimension.W,t,r,u)}).blur(function(){f.HandleRatioInputBlur($(this),i,n.Globals.ImageDimension.W)});i.keyup(function(i){f.HandleRatioInputKeyUp($(this),t,n.Globals.ImageDimension.H,i,r,u)}).blur(function(){f.HandleRatioInputBlur($(this),t,n.Globals.ImageDimension.H)})},t.prototype._initializeUI=function(t){var c=this,i=t.attr("id"),o=$('<div class="photo-editor-ui_container '+i+'"><\/div>'),s=$('<div class="photo-editor-ui_tab-container"><\/div>'),r=$('<div data-id="1" class="active"><\/div>'),u=$('<div data-id="2"><\/div>'),f=$('<div data-id="3"><\/div>'),e=function(n){c.actions.init();var t=$(n).attr("data-id");$(".photo-editor-ui_container."+i+" .photo-editor-ui_tab-container > div").hide().removeClass("active");$(".photo-editor-ui_container."+i+' .photo-editor-ui_tab-container > div[data-id="'+t+'"]').show().addClass("active");$(".photo-editor-ui_container."+i+" .photo-editor-ui_tab-control-container > span").removeClass("active");$(n).addClass("active")},h=$('<div class="photo-editor-ui_tab-control-container"><\/div>'),l=$('<span data-id="1" class="active">'+n.Globals.Texts.EditorNav.PictureSettings+"<\/span>").click(function(){e(this)}),a=$('<span data-id="2">'+n.Globals.Texts.EditorNav.FilterGalery+"<\/span>").click(function(){e(this)}),v=$('<span data-id="3">'+n.Globals.Texts.EditorNav.ColorSettings+"<\/span>").click(function(){e(this)});r.append(this._getTab1Content(r));u.append(this._getTab2Content(u));f.append(this._getTab3Content(f));s.append(r,u,f);h.append(l,a,v);o.append(h,s);t.append(o)},t.prototype._getTab1Content=function(t){var i=this,r=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.RotateLeft,"rotate-left",function(){i.actions.Rotate(n.Globals.RotateDirection.Left)})),u=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.RotateRight,"rotate-right",function(){i.actions.Rotate(n.Globals.RotateDirection.Right)})),f=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.FlipH,"flip-h",function(){i.actions.Flip(n.Globals.FlipDirection.Horizontal)})),e=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.FlipV,"flip-v",function(){i.actions.Flip(n.Globals.FlipDirection.Vertical)})),o=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Crop,"crop",function(){i.actions.StartCropping(function(){var r=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Cancel,"crop-cancel",function(){i.actions._disposeSubControls();i.actions.CancelCrop()})),u=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Submit,"crop-submit",function(){i.actions._disposeSubControls();i.actions.SubmitCrop()})),f=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.CropCustom,"crop-custom",function(){i.actions.CropCustom()})),e=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.CropSquare,"crop-square",function(){i.actions.CropSquare()})),o=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Crop4to3,"crop-4to3",function(){i.actions.Crop4to3()})),s=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Crop16to9,"crop-16to9",function(){i.actions.Crop16to6()}));i.actions.init(function(){i.actions._disposeSubControls();i.actions.CancelCrop()},function(){i.actions._createSubControls([r,f,e,o,s,u],t)})})})),s=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Resize,"resize",function(){var r=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(i.actions.state.imageW,"input-width",function(){},"input",n.Globals.Texts.Inputs.ResizeWidthPlch)),u=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(i.actions.state.imageH,"input-height",function(){},"input",n.Globals.Texts.Inputs.ResizeHeightPlch)),f=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.LockRatio,"lock-ratio "+(i.lockedRatio?"active":""),function(){i.lockedRatio=!i.lockedRatio;i.lockedRatio?(f.addClass("active"),r.keyup()):f.removeClass("active")})),e=function(){i.actions._disposeSubControls()},s=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Cancel,"resize-cancel",e)),o=function(){var n=0,t=0;r.val()!=""&&u.val()!=""&&(n=+r.val(),t=+u.val(),isNaN(n)||isNaN(t)||(i.actions.ResizeImage(n,t),i.actions._disposeSubControls()))},h=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Submit,"resize-submit",o));i.BindResizeEventHandlers(r,u,o,e);i.actions.init(i.actions._disposeSubControls,function(){i.actions._createSubControls([s,r,f,u,h],t)})})),h=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.FitToScreen,"fitToScreen",function(){i.actions.TriggerFitToScreen()})),c=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Resset,"resetAll",function(){i.actions.Reset()}));return[o,r,u,f,e,s,h,c]},t.prototype._getTab2Content=function(){return this.actions.GenerateFilterIcons()},t.prototype._getTab3Content=function(){var t=this,i=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Brightness,"brightness",function(){t.actions.StartBrightness()})),r=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Saturation,"saturation",function(){t.actions.StartSaturation()})),u=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Contrast,"contrast",function(){t.actions.StartContrast()})),f=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Exposure,"exposure",function(){t.actions.StartExposure()})),e=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Shadows,"shadows",function(){t.actions.StartShadows()})),o=n.Html.HTMLControls.GetButtonContol(new n.Html.HTMLButtonControl(n.Globals.Texts.Buttons.Highlights,"highlights",function(){t.actions.StartHighlights()}));return[i,r,u,f,e,o]},t}();t.ImageEditor=i})(t=n.Editor||(n.Editor={}))}(PhotoEditor||(PhotoEditor={})),function(n){var t="image-editor",i=function(){function i(n,t){this.editors=[];this.imageSources=[];this.intEditors=0;this.$container=$(n);this.appendEditorsToId=t.appendTo;this.disposeOnSave=t.disposeOnSave||!1;this.$appendTo=$("#"+this.appendEditorsToId);this.currentEditor=0}return i.prototype.GetImages=function(){var n=this;return new Promise(function(t,i){var r=n.$container.find("img");$.each(r,function(t,i){n.imageSources.push($(i).attr("src"))});n.imageSources.length>0?t():i()})},i.prototype.LoadEditors=function(){var i=this;return new Promise(function(r){i.imageSources.forEach(function(u,f){var o="editor-"+i.$container.attr("id")+"-"+f,s="",h,e;f==0&&(s="active");h=$('<div class="'+t+" "+s+'" id="'+o+'" data-id="'+f+'"><\/div>');i.$appendTo.append(h);e=new n.Editor.ImageEditor(o,f,i.imageSources[f]);e.LoadEditor().then(function(){i.editors.push(e);i.intEditors++;i.intEditors==i.imageSources.length&&r()})})})},i.prototype.InitNavigationUI=function(){var t=this;if(this.imageSources.length>0){this.$navButtonContainer=$('<div class="photo-editor-ui_nav"><\/div>');this.$navPagingContainer=$('<div class="photo-editor-ui_nav-paging"><\/div>');var r=$("<button>"+n.Globals.Texts.Nav.Back+"<\/button>").click(function(){t.SwitchEditors(--t.currentEditor)}),u=$("<button>"+n.Globals.Texts.Nav.EditNextPicture+"<\/button>").click(function(){t.SwitchEditors(++t.currentEditor)}),i=$("<button>"+n.Globals.Texts.Nav.UploadAll+"<\/button>").click(function(){t.UploadAll()});this.$navButtonContainer.append(i);this.$appendTo.append(this.$navButtonContainer)}},i.prototype.SwitchEditors=function(n){n>=0&&n<this.intEditors?$.each(this.editors,function(t,i){i.dataId===n?$("#"+i.containerId).addClass("active"):($("#"+i.containerId).removeClass("active"),i.actions.init(null,null));n<=t?$('.photo-editor-ui_pg-item[data-id="'+t+'"]').addClass("done"):$('.photo-editor-ui_pg-item[data-id="'+t+'"]').removeClass("done")}):this.currentEditor=this.currentEditor<0?0:this.intEditors-1},i.prototype.UploadAll=function(){var n=this,t=[],i;$.each(this.editors,function(r,u){u.actions.Export(PhotoEditorSDK.ImageFormat.JPEG,function(u){t.push(u);r===n.intEditors-1&&i(t)},n.disposeOnSave)});i=function(t){$("#temp-preview").fadeIn(200);setTimeout(function(){console.log(t);$("#temp-preview > div").html("");$.each(t,function(n,t){$("#temp-preview > div").append('<img src="'+t.image+'" alt="" />')})},1e3);n.disposeOnSave&&(n.$navButtonContainer.remove(),n.$navButtonContainer.remove())}},i.prototype.CloseWithoutSave=function(){$.each(this.editors,function(n,t){t.actions.DisposeEditor()});this.$navButtonContainer.remove();this.$navButtonContainer.remove()},i}();n.ImageContainer=i}(PhotoEditor||(PhotoEditor={})),function(n){n.fn.ImageContainer=function(n){var t=new PhotoEditor.ImageContainer(this,n);t.GetImages().then(function(){t.LoadEditors().then(function(){t.InitNavigationUI()})})}}(jQuery)